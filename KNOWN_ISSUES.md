# å·²çŸ¥é—®é¢˜å’Œæ¶æ„ç¼ºé™·

## çŠ¶æ€è¯´æ˜
**å½“å‰ç³»ç»Ÿæ˜¯ç ”ç©¶åŸå‹ï¼ˆPoCï¼‰ï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚**

## ä¸€ã€æ ¸å¿ƒæ¶æ„ç¼ºé™·

### 1. LLMå•ç‚¹æ•…éšœï¼ˆä¸¥é‡ï¼‰
**é—®é¢˜ï¼š**
- LLM APIæ•…éšœå¯¼è‡´ç³»ç»Ÿå®Œå…¨ä¸å¯ç”¨
- 120ç§’è¶…æ—¶å¯¼è‡´ç”¨æˆ·ä½“éªŒæå·®
- Temperature=0.7å¯¼è‡´ç»“æœä¸å¯é¢„æµ‹
- æ— é˜²å¾¡Prompt Injectionæ”»å‡»

**å½±å“ï¼š**
- ç³»ç»Ÿå¯ç”¨æ€§å®Œå…¨ä¾èµ–å¤–éƒ¨LLMæœåŠ¡
- æ— æ³•ä¿è¯ç»“æœä¸€è‡´æ€§
- å­˜åœ¨å®‰å…¨é£é™©

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] Circuit Breakeræ¨¡å¼
- [ ] é™çº§åˆ°é¢„å®šä¹‰ä»£ç æ¨¡æ¿
- [ ] Temperatureè®¾ä¸º0.1æˆ–æä¾›deterministic mode
- [ ] Prompt sanitizationå’Œè¾“å…¥éªŒè¯
- [ ] è¶…æ—¶é™ä½åˆ°30ç§’ï¼Œå¿«é€Ÿå¤±è´¥
```

### 2. åŠ¨æ€ä»£ç ç”Ÿæˆä¸å¯æ§ï¼ˆä¸¥é‡ï¼‰
**é—®é¢˜ï¼š**
- 3æ¬¡é‡è¯•å¤±è´¥åç›´æ¥è¿”å›é”™è¯¯ï¼Œç”¨æˆ·è¯·æ±‚ä¸¢å¤±
- Mockæµ‹è¯•æ— æ³•ä¿è¯çœŸå®ç¯å¢ƒå¯ç”¨æ€§
- æ¯æ¬¡ç”Ÿæˆä»£ç ä¸åŒï¼Œæ— æ³•å›å½’æµ‹è¯•
- å·¥å…·è´¨é‡è¯„åˆ†å¯èƒ½è¿‡æ—¶

**å½±å“ï¼š**
- æ— æ³•ä¿è¯ä»£ç è´¨é‡ä¸‹é™
- ç”Ÿäº§ç¯å¢ƒå¯èƒ½å‡ºç°æœªç»æµ‹è¯•çš„ä»£ç 
- æ— æ³•è¿½è¸ªå’Œä¿®å¤ç‰¹å®šé—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] ä»£ç æ¨¡æ¿åº“ä½œä¸ºfallback
- [ ] çœŸå®äº‘APIé›†æˆæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
- [ ] ä»£ç ç‰ˆæœ¬æ§åˆ¶å’Œå®¡è®¡æ—¥å¿—
- [ ] å·¥å…·è‡ªåŠ¨æ›´æ–°æœºåˆ¶
- [ ] ä»£ç ç”Ÿæˆç»“æœç¼“å­˜ï¼ˆç›¸åŒæŸ¥è¯¢è¿”å›ç›¸åŒä»£ç ï¼‰
```

### 3. æ²™ç®±å®‰å…¨æ€§ä¸è¶³ï¼ˆä¸¥é‡ï¼‰
**é—®é¢˜ï¼š**
- Windowså¹³å°æ— resourceé™åˆ¶
- ASTåˆ†ææ— æ³•æ•è·åå°„/åŠ¨æ€è°ƒç”¨
- æƒé™ç™½åå•å¯è¢«ç»•è¿‡
- æµ‹è¯•é˜¶æ®µå¯èƒ½è°ƒç”¨çœŸå®äº‘APIäº§ç”Ÿè´¹ç”¨

**å½±å“ï¼š**
- æ¶æ„ä»£ç å¯èƒ½æ— é™å ç”¨èµ„æº
- å®‰å…¨æ£€æŸ¥å¯è¢«ç»•è¿‡
- å¯èƒ½äº§ç”Ÿæ„å¤–çš„äº‘æœåŠ¡è´¹ç”¨

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] ä½¿ç”¨Docker/Podmanå®¹å™¨éš”ç¦»
- [ ] è¿è¡Œæ—¶ç›‘æ§å’Œå¼ºåˆ¶ç»ˆæ­¢
- [ ] ç½‘ç»œéš”ç¦»ï¼ˆç¦æ­¢æµ‹è¯•é˜¶æ®µè®¿é—®äº‘APIï¼‰
- [ ] æ›´ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥ï¼ˆåŒ…æ‹¬å‚æ•°éªŒè¯ï¼‰
- [ ] èµ„æºé…é¢å¼ºåˆ¶æ‰§è¡Œ
```

### 4. RAGç³»ç»Ÿè´¨é‡é—®é¢˜ï¼ˆä¸­ç­‰ï¼‰
**é—®é¢˜ï¼š**
- å‘é‡æ£€ç´¢å¯èƒ½è¿”å›ä¸ç›¸å…³æ–‡æ¡£
- æ–‡æ¡£ç¼“å­˜24å°æ—¶å¯èƒ½è¿‡æœŸ
- HuggingFaceæ¨¡å‹é¦–æ¬¡ä¸‹è½½å»¶è¿Ÿ
- RAGè¶…æ—¶15ç§’ä¼šè·³è¿‡ä¸Šä¸‹æ–‡

**å½±å“ï¼š**
- ç”Ÿæˆä»£ç å¯èƒ½åŸºäºé”™è¯¯/è¿‡æœŸçš„æ–‡æ¡£
- é¦–æ¬¡ä½¿ç”¨ä½“éªŒå·®
- è¶…æ—¶å¯¼è‡´ä»£ç è´¨é‡ä¸‹é™

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] æ£€ç´¢ç»“æœè´¨é‡è¯„åˆ†
- [ ] æ–‡æ¡£ç‰ˆæœ¬è·Ÿè¸ªå’Œè‡ªåŠ¨æ›´æ–°
- [ ] æ¨¡å‹é¢„åŠ è½½
- [ ] RAGå¤±è´¥æ—¶çš„fallbackç­–ç•¥
```

## äºŒã€å¯é æ€§é—®é¢˜

### 5. ç½‘ç»œè°ƒç”¨é“¾è„†å¼±ï¼ˆä¸¥é‡ï¼‰
**é—®é¢˜ï¼š**
- æ— Circuit Breaker
- æ— Retryæœºåˆ¶
- æ— Fallback
- é”™è¯¯ä¸Šä¸‹æ–‡ä¸¢å¤±

**è°ƒç”¨é“¾ï¼š**
```
ç”¨æˆ· â†’ Orchestrator â†’ Manager(LLM) â†’ SpecDoc â†’ RAG(Embedding)
     â†’ CodeGen(LLM) â†’ Sandbox â†’ CloudAPI
ä»»ä½•ç¯èŠ‚å¤±è´¥ = æ•´ä¸ªè¯·æ±‚å¤±è´¥
```

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] tenacityåº“é›†æˆï¼ˆè‡ªåŠ¨é‡è¯•ï¼‰
- [ ] pybreakeråº“é›†æˆï¼ˆç†”æ–­å™¨ï¼‰
- [ ] ç»“æ„åŒ–é”™è¯¯æ—¥å¿—ï¼ˆåŒ…å«å®Œæ•´è°ƒç”¨é“¾ï¼‰
- [ ] éƒ¨åˆ†é™çº§ï¼ˆæŸäº›ç¯èŠ‚å¤±è´¥ä»èƒ½æä¾›åŸºç¡€åŠŸèƒ½ï¼‰
```

### 6. å¹¶å‘æ§åˆ¶ç¼ºå¤±ï¼ˆä¸¥é‡ï¼‰
**é—®é¢˜ï¼š**
- å…¨å±€å•ä¾‹æ— å¹¶å‘æ§åˆ¶
- å¤šè¯·æ±‚å¯èƒ½è§¦å‘LLM APIé™æµ
- å†…å­˜ä¼šè¯å¯èƒ½æº¢å‡º
- ChromaDBå¹¶å‘å®‰å…¨æ€§æœªçŸ¥

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] è¯·æ±‚é˜Ÿåˆ—å’Œé€Ÿç‡é™åˆ¶
- [ ] LLMè°ƒç”¨æ± ï¼ˆé™åˆ¶å¹¶å‘æ•°ï¼‰
- [ ] ä¼šè¯æŒä¹…åŒ–åˆ°Redis/æ•°æ®åº“
- [ ] ChromaDBå¹¶å‘æµ‹è¯•å’Œé”æœºåˆ¶
```

### 7. çŠ¶æ€ç®¡ç†é—®é¢˜ï¼ˆä¸­ç­‰ï¼‰
**é—®é¢˜ï¼š**
- RAGç´¢å¼•æ°¸ä¸æ¸…ç†ï¼Œå†…å­˜å¯èƒ½æ³„æ¼
- ä¼šè¯24å°æ—¶è¿‡æœŸä½†æ— åå°æ¸…ç†
- å·¥å…·æ³¨å†Œè¡¨æŒä¹…åŒ–æœºåˆ¶ä¸æ˜

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] LRUç¼“å­˜æ·˜æ±°ç­–ç•¥
- [ ] å®šæ—¶æ¸…ç†ä»»åŠ¡ï¼ˆAPSchedulerï¼‰
- [ ] æŒä¹…åŒ–åˆ°SQLite/PostgreSQL
```

## ä¸‰ã€ç¨³å®šæ€§é—®é¢˜

### 8. ä¸ç¡®å®šæ€§é—®é¢˜ï¼ˆæ ¸å¿ƒçŸ›ç›¾ï¼‰
**é—®é¢˜ï¼š**
- Temperature=0.7å¯¼è‡´æ¯æ¬¡ç»“æœä¸åŒ
- æ— æ³•A/Bæµ‹è¯•
- æ— æ³•å¤ç°bug
- ç”¨æˆ·æ— æ³•ä¿¡ä»»"æ¯æ¬¡ä¸åŒ"çš„ç³»ç»Ÿ

**è¿™æ˜¯è®¾è®¡ç†å¿µä¸SREéœ€æ±‚çš„æ ¹æœ¬çŸ›ç›¾ï¼š**
```
SREéœ€æ±‚: ç¡®å®šæ€§ã€å¯é‡å¤ã€å¯é¢„æµ‹
ç³»ç»Ÿç°çŠ¶: ä¸ç¡®å®šæ€§ã€ä¸å¯é‡å¤ã€ä¸å¯é¢„æµ‹
```

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# æ ¹æœ¬æ€§æ”¹è¿›
- [ ] Deterministic Mode: Temperature=0, å›ºå®šseed
- [ ] Code Cache: ç›¸åŒæŸ¥è¯¢è¿”å›ç¼“å­˜çš„ä»£ç 
- [ ] Version Control: æ‰€æœ‰ç”Ÿæˆçš„ä»£ç å¸¦ç‰ˆæœ¬å·å’ŒHash
- [ ] Audit Log: è®°å½•æ¯æ¬¡ç”Ÿæˆçš„å®Œæ•´ä¸Šä¸‹æ–‡
```

### 9. å¤šäº‘APIå·®å¼‚å¤„ç†ä¸è¶³ï¼ˆä¸­ç­‰ï¼‰
**é—®é¢˜ï¼š**
- è®¤è¯æ–¹å¼ä¸åŒ
- é”™è¯¯æ ¼å¼ä¸åŒ
- é™æµç­–ç•¥ä¸åŒ
- DataAdapteråªè½¬æ¢æ•°æ®ï¼Œä¸å¤„ç†è¿™äº›å·®å¼‚

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å±‚
- [ ] ç»Ÿä¸€çš„è®¤è¯æŠ½è±¡
- [ ] ç»Ÿä¸€çš„é™æµå’Œé‡è¯•ç­–ç•¥
- [ ] äº‘å¹³å°ç‰¹å®šçš„Adapter
```

### 10. æ—¶åºé—®é¢˜ï¼ˆä¸­ç­‰ï¼‰
**é—®é¢˜ï¼š**
- ä»£ç ç”Ÿæˆåˆ°æ‰§è¡Œå¯èƒ½è€—æ—¶æ•°åˆ†é’Ÿ
- æœŸé—´äº‘èµ„æºå¯èƒ½å˜åŒ–
- å·¥å…·ä»£ç å¯èƒ½è¿‡æ—¶
- æ²™ç®±æµ‹è¯•å¯èƒ½äº§ç”Ÿå®é™…å‰¯ä½œç”¨

**è§£å†³æ–¹æ¡ˆï¼š**
```python
# éœ€è¦å®ç°
- [ ] æ‰§è¡Œå‰éªŒè¯èµ„æºå­˜åœ¨æ€§
- [ ] å·¥å…·è¿‡æœŸæ£€æµ‹å’Œè‡ªåŠ¨æ›´æ–°
- [ ] ä¸¥æ ¼çš„æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒéš”ç¦»
```

## å››ã€ç³»ç»Ÿå®šä½å’Œä½¿ç”¨å»ºè®®

### âœ… å½“å‰é€‚ç”¨åœºæ™¯
1. **æŠ€æœ¯ç ”ç©¶**ï¼šæ¢ç´¢AIè¾…åŠ©SREçš„å¯èƒ½æ€§
2. **åŸå‹éªŒè¯**ï¼šéªŒè¯Agentæ¶æ„çš„å¯è¡Œæ€§
3. **æ•™å­¦æ¼”ç¤º**ï¼šå±•ç¤ºAI+äº‘æœåŠ¡é›†æˆ
4. **å†…éƒ¨å·¥å…·**ï¼šä¸ªäººæˆ–å°å›¢é˜Ÿçš„éå…³é”®åœºæ™¯

### âŒ ä¸é€‚ç”¨åœºæ™¯
1. **ç”Ÿäº§ç¯å¢ƒ**ï¼šå¯é æ€§ã€å®‰å…¨æ€§ä¸è¶³
2. **å…³é”®ä¸šåŠ¡**ï¼šæ— æ³•ä¿è¯SLA
3. **é‡‘è/åŒ»ç–—**ï¼šå®‰å…¨å’Œåˆè§„é—®é¢˜
4. **å¤§è§„æ¨¡éƒ¨ç½²**ï¼šå¹¶å‘å’Œæ€§èƒ½é—®é¢˜

### ğŸ“Š ç”Ÿäº§åŒ–è·¯çº¿å›¾

#### çŸ­æœŸæ”¹è¿›ï¼ˆ1-2å‘¨ï¼‰
- [ ] é™ä½Temperatureåˆ°0.1
- [ ] æ·»åŠ åŸºç¡€çš„é”™è¯¯é‡è¯•
- [ ] å®ç°ä»£ç ç»“æœç¼“å­˜
- [ ] æ·»åŠ è¯·æ±‚é€Ÿç‡é™åˆ¶

#### ä¸­æœŸæ”¹è¿›ï¼ˆ1-2æœˆï¼‰
- [ ] å®ç°Circuit Breaker
- [ ] Dockerå®¹å™¨åŒ–æ²™ç®±
- [ ] ä¼šè¯æŒä¹…åŒ–
- [ ] å·¥å…·è‡ªåŠ¨æ›´æ–°

#### é•¿æœŸæ”¹è¿›ï¼ˆ3-6æœˆï¼‰
- [ ] æ··åˆæ¶æ„ï¼šè§„åˆ™å¼•æ“+LLM
- [ ] å®Œæ•´çš„ç›‘æ§å’Œå‘Šè­¦
- [ ] åˆ†å¸ƒå¼éƒ¨ç½²
- [ ] ä¼ä¸šçº§å®‰å…¨å®¡è®¡

## äº”ã€ç­”è¾©å‡†å¤‡å»ºè®®

### å¦‚ä½•å›ç­”è¿™äº›æ‹·é—®ï¼Ÿ

#### 1. è¯šå®æ‰¿è®¤ç¼ºé™·
> "è¿™æ˜¯ä¸€ä¸ªç ”ç©¶åŸå‹ï¼Œä¸»è¦éªŒè¯AIè¾…åŠ©SREçš„æŠ€æœ¯å¯è¡Œæ€§ã€‚æˆ‘ä»¬æ¸…æ¥šåœ°çŸ¥é“å­˜åœ¨Xã€Yã€Zç­‰é—®é¢˜ï¼Œä¸é€‚åˆç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚"

#### 2. å¼ºè°ƒåˆ›æ–°ç‚¹
> "æˆ‘ä»¬çš„åˆ›æ–°åœ¨äºï¼š
> - çœŸæ­£çš„Agenté©±åŠ¨ï¼Œä¸ç¡¬ç¼–ç ä¸šåŠ¡é€»è¾‘
> - SDKå†…çœ+RAGçš„æ–‡æ¡£è·å–æ–¹å¼
> - ä»£ç ç”Ÿæˆ+æ²™ç®±æµ‹è¯•çš„é—­ç¯éªŒè¯"

#### 3. å±•ç¤ºè§£å†³æ–¹æ¡ˆæ€è·¯
> "å¯¹äºç”Ÿäº§åŒ–ï¼Œæˆ‘ä»¬çš„è·¯çº¿å›¾æ˜¯ï¼š
> - çŸ­æœŸï¼šé™ä½ä¸ç¡®å®šæ€§ï¼Œæ·»åŠ åŸºç¡€å®¹é”™
> - ä¸­æœŸï¼šæ··åˆæ¶æ„ï¼Œè§„åˆ™å¼•æ“+LLM
> - é•¿æœŸï¼šä¼ä¸šçº§å¯é æ€§å’Œå®‰å…¨æ€§"

#### 4. æ˜ç¡®å®šä½
> "è¿™æ˜¯æ¢ç´¢æ€§ç ”ç©¶ï¼Œä¸æ˜¯æˆç†Ÿäº§å“ã€‚ç›®æ ‡æ˜¯è¯æ˜'AIèƒ½è¾…åŠ©SRE'è€Œä¸æ˜¯'å®Œå…¨æ›¿ä»£äººå·¥'ã€‚"

### ç­”è¾©æ—¶çš„æ¼”ç¤ºç­–ç•¥

**âœ… å±•ç¤ºä»€ä¹ˆï¼š**
1. æˆåŠŸæ¡ˆä¾‹ï¼šç®€å•æŸ¥è¯¢çš„ç«¯åˆ°ç«¯æµç¨‹
2. æŠ€æœ¯äº®ç‚¹ï¼šSDKå†…çœã€RAGæ£€ç´¢ã€ä»£ç ç”Ÿæˆ
3. åˆ›æ–°æ¶æ„ï¼šAgentåä½œæ¨¡å¼

**âŒ é¿å…ä»€ä¹ˆï¼š**
1. å£°ç§°"ç”Ÿäº§å¯ç”¨"
2. å¿½è§†å¯é æ€§é—®é¢˜
3. è¿‡åº¦æ‰¿è¯ºåŠŸèƒ½

**ğŸ¯ æ ¸å¿ƒè®ºç‚¹ï¼š**
> "æˆ‘ä»¬è¯æ˜äº†AI Agentå¯ä»¥ç†è§£äº‘æœåŠ¡æ–‡æ¡£ã€ç”Ÿæˆå¯æ‰§è¡Œä»£ç ï¼Œè¿™ä¸ºæœªæ¥çš„SREè‡ªåŠ¨åŒ–æä¾›äº†æ–°æ€è·¯ã€‚è™½ç„¶å½“å‰ç³»ç»Ÿæœ‰è¯¸å¤šé™åˆ¶ï¼Œä½†æŠ€æœ¯è·¯å¾„æ˜¯å¯è¡Œçš„ã€‚"

## å‚è€ƒèµ„æ–™
- Circuit Breakeræ¨¡å¼: https://martinfowler.com/bliki/CircuitBreaker.html
- Retry Pattern: https://learn.microsoft.com/en-us/azure/architecture/patterns/retry
- Bulkhead Pattern: https://learn.microsoft.com/en-us/azure/architecture/patterns/bulkhead
